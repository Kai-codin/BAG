/** Rail Announcements Generator. By Roy Curtis, MIT license, 2018 */

// Must be up here, else global function calls will fail elsewhere (order is important)
@import "../../css/globals"

// CSS reset

*
  margin     0
  padding    0
  box-sizing border-box

body, html
  width      100%
  height     100%
  overflow-x hidden

// Parts

body
  backAndForeColor($bgDarkest, $fgBright)
  flexbox(row)
  font-family sans-serif

h1
  border-bottom 2px solid $fgFocus
  padding       16px

#partSelector
  flex-basis 40%
  overflow   auto

  > div
    flexbox()
    margin    16px 16px 0 16px
    position  sticky
    top       16px
    z-index   10

    input
      border    none
      flex-grow 1
      font-size large
      padding   8px

      &.noMatches
        background lightness($bgPanic, 80%)

  ul
    unselectable()
    font-size  12px
    list-style none
    margin     16px 12px 16px 16px
    // Promote to 3D layer, for smoother rendering
    transform  translate3d(0, 0, 0)

    li
      singleLine()
      background    $bgDarker
      border-right  4px solid $bgDarkest
      cursor        pointer
      margin-bottom 4px
      padding       4px

      &:hover
        background $bgDark

      code
        color $fgDim
        float right

      &.missing
        border-right-color $bgPanic

      &.highlight
        background $bgDark

      &.selected, &.selected code
        backAndForeColor($fgFocus, $fgBrightest)

#tapeDeck
  flex-basis 60%

  #frmSetup
    display grid

    grid-template-columns 20% 30% 20% 30%

    label, select, input
      font-size large
      margin    16px
      width     auto

  #frmTapedeck
    flexbox(column)
    align-items center

    > *
      margin 16px 16px 0 16px

    menu button
      pressable()
      font-size large
      height    48px
      margin    8px
      padding   8px

      svg
        width  32px
        height 32px

      &.recording
        background $fgMarquee
        box-shadow 0px 0px 16px $fgFocus

    .id
      color       $fgDim
      font-size   large
      font-family monospace

    .caption
      font-size x-large
      height    100px

.clipEditor
  align-self   stretch
  justify-self flex-end
  height       200px
  position     relative

  > *
    position absolute

  .title
    font-size   large
    font-family monospace
    margin-top  8px
    text-align  center
    width       100%

  canvas
    background $bgDarker
    width      100%
    height     100%

  .clipper
    unselectable()
    background alpha($bgDarkest, 0.9)
    cursor     ew-resize
    width      1px
    height     100%

    &::after
      background $bgDarkest
      border     1px solid $fgDim
      content    ' '
      position   absolute
      top        83px
      width      8px
      height     29px

    &.left
      border-right 1px solid $fgDim
      left         0px

      &::after
        right -5px

    &.right
      border-left 1px solid $fgDim
      right       0px

      &::after
        left -5px

    &:hover, &.dragging
      border-color $fgMarquee

      &::after
        background   $fgFocus
        border-color $fgMarquee

.voiceMeter
  align-self stretch
  height     50px

  canvas
    background $bgDarker
    width      100%
    height     100%

// Hides embedded phraseset XML documents
iframe
  display none